{"version":3,"sources":["web/static/js/addict.js","web/static/js/login.js"],"names":["$","document","ready","navigateToRoot","window","location","href","addErrors","errors","i","length","append","message","keypress","e","which","click","name","val","email","password","csrf_token","params","ajax","type","url","headers","data","done","empty","fail","res","responseJSON","token","signature"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAEAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AAC3B,WAASC,cAAT,GAA0B;AACxBC,WAAOC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD;;AAED,WAASC,SAAT,CAAmBC,MAAnB,EAA2B;AACzB,SAAK,IAAIC,IAAID,OAAOE,MAAP,GAAgB,CAA7B,EAAgCD,KAAK,CAArC,EAAwCA,GAAxC,EAA6C;AAC3CT,QAAE,gBAAF,EAAoBW,MAApB,CAA2B,qCAAmCH,OAAOC,CAAP,EAAUG,OAA7C,GAAqD,MAAhF;AACD;AACF;;AAEDZ,IAAE,sCAAF,EAA0Ca,QAA1C,CAAmD,UAAUC,CAAV,EAAa;AAC9D,QAAIA,EAAEC,KAAF,IAAW,EAAf,EAAmB;AACjBf,QAAE,eAAF,EAAmBgB,KAAnB;AACAhB,QAAE,YAAF,EAAgBgB,KAAhB;AACAhB,QAAE,qBAAF,EAAyBgB,KAAzB;AACAhB,QAAE,+BAAF,EAAmCgB,KAAnC;AACA,aAAO,KAAP,CALiB,CAKA;AAClB;AACF,GARD;;AAUAhB,IAAE,eAAF,EAAmBgB,KAAnB,CAAyB,YAAY;AACnC,QAAIC,OAAOjB,EAAE,WAAF,EAAekB,GAAf,EAAX;AACA,QAAIC,QAAQnB,EAAE,YAAF,EAAgBkB,GAAhB,EAAZ;AACA,QAAIE,WAAWpB,EAAE,eAAF,EAAmBkB,GAAnB,EAAf;AACA,QAAIG,aAAarB,EAAE,aAAF,EAAiBkB,GAAjB,EAAjB;AACA,QAAII,SAAS;AACXL,YAAMA,IADK;AAEXE,aAAOA,KAFI;AAGXC,gBAAUA;AAHC,KAAb;AAKApB,MAAEuB,IAAF,CAAO;AACLC,YAAM,MADD;AAELC,WAAK,WAFA;AAGLC,eAAS;AACP,wBAAgBL;AADT,OAHJ;AAMLM,YAAML;AAND,KAAP,EAQCM,IARD,CAQMzB,cARN;AASD,GAnBD;;AAqBAH,IAAE,aAAF,EAAiBgB,KAAjB,CAAuB,YAAY;AACjC,QAAIK,aAAarB,EAAE,aAAF,EAAiBkB,GAAjB,EAAjB;AACAlB,MAAEuB,IAAF,CAAO;AACLC,YAAM,QADD;AAELC,WAAK,SAFA;AAGLC,eAAS;AACP,wBAAgBL;AADT;AAHJ,KAAP,EAMGO,IANH,CAMQzB,cANR;AAOD,GATD;;AAWAH,IAAE,YAAF,EAAgBgB,KAAhB,CAAsB,YAAY;AAChC,QAAIG,QAAQnB,EAAE,YAAF,EAAgBkB,GAAhB,EAAZ;AACA,QAAIE,WAAWpB,EAAE,eAAF,EAAmBkB,GAAnB,EAAf;AACA,QAAIG,aAAarB,EAAE,aAAF,EAAiBkB,GAAjB,EAAjB;AACAlB,MAAE,gBAAF,EAAoB6B,KAApB;AACA,QAAIP,SAAS;AACXH,aAAOA,KADI;AAEXC,gBAAUA;AAFC,KAAb;;AAKApB,MAAEuB,IAAF,CAAO;AACLC,YAAM,MADD;AAELC,WAAK,QAFA;AAGLC,eAAS;AACP,wBAAgBL;AADT,OAHJ;AAMLM,YAAML;AAND,KAAP,EAQCQ,IARD,CAQM,UAAUC,GAAV,EAAe;AAACxB,gBAAUwB,IAAIC,YAAJ,CAAiBxB,MAA3B;AAAqC,KAR3D,EASCoB,IATD,CASMzB,cATN,EASsB;AACvB,GApBD;;AAsBAH,IAAE,qBAAF,EAAyBgB,KAAzB,CAA+B,YAAY;AACzC,QAAIK,aAAarB,EAAE,aAAF,EAAiBkB,GAAjB,EAAjB;AACA,QAAIE,WAAWpB,EAAE,eAAF,EAAmBkB,GAAnB,EAAf;AACA,QAAIe,QAAQjC,EAAE,QAAF,EAAYkB,GAAZ,EAAZ;AACA,QAAIgB,YAAYlC,EAAE,YAAF,EAAgBkB,GAAhB,EAAhB;AACAlB,MAAE,gBAAF,EAAoB6B,KAApB;AACA,QAAIP,SAAS;AACXF,gBAAUA,QADC;AAEXa,aAAOA,KAFI;AAGXC,iBAAWA;AAHA,KAAb;;AAMAlC,MAAEuB,IAAF,CAAO;AACLC,YAAM,MADD;AAELC,WAAK,iBAFA;AAGLC,eAAS;AACP,wBAAgBL;AADT,OAHJ;AAMLM,YAAML;AAND,KAAP,EAQCQ,IARD,CAQM,UAAUC,GAAV,EAAe;AAACxB,gBAAUwB,IAAIC,YAAJ,CAAiBxB,MAA3B;AAAqC,KAR3D,EASCoB,IATD,CASMzB,cATN,EASsB;AACvB,GAtBD;;AAyBAH,IAAE,+BAAF,EAAmCgB,KAAnC,CAAyC,YAAY;AACnD,QAAIG,QAAQnB,EAAE,YAAF,EAAgBkB,GAAhB,EAAZ;AACA,QAAIG,aAAarB,EAAE,aAAF,EAAiBkB,GAAjB,EAAjB;AACAlB,MAAE,gBAAF,EAAoB6B,KAApB;AACA,QAAIP,SAAS;AACXH,aAAOA;AADI,KAAb;;AAIAnB,MAAEuB,IAAF,CAAO;AACLC,YAAM,MADD;AAELC,WAAK,mBAFA;AAGLC,eAAS;AACP,wBAAgBL;AADT,OAHJ;AAMLM,YAAML;AAND,KAAP,EAQCQ,IARD,CAQM,YAAW;AAAEvB,gBAAU,CAAC,EAACK,SAAS,uDAAV,EAAD,CAAV;AAAiF,KARpG,EASCgB,IATD,CASMzB,cATN,EASsB;AACvB,GAlBD;AAmBD,CAvHD;;;;;;ACJA","file":"priv/static/js/login.js","sourcesContent":["// for phoenix_html support, including form and button helpers\n// copy the following scripts into your javascript bundle:\n// * https://raw.githubusercontent.com/phoenixframework/phoenix_html/v2.3.0/priv/static/phoenix_html.js\n\n$(document).ready(function() {\n  function navigateToRoot() {\n    window.location.href = \"/\";\n  }\n\n  function addErrors(errors) {\n    for (var i = errors.length - 1; i >= 0; i--) {\n      $('.addict.errors').append(\"<p class='addict error-message'>\"+errors[i].message+\"</p>\");\n    }\n  }\n\n  $('#txt-name, #txt-email, #txt-password').keypress(function (e) {\n    if (e.which == 13) {\n      $('#btn-register').click();\n      $('#btn-login').click();\n      $('#btn-reset-password').click();\n      $('#btn-send-reset-password-link').click();\n      return false;    //<---- Add this line\n    }\n  });\n\n  $('#btn-register').click(function () {\n    var name = $('#txt-name').val();\n    var email = $('#txt-email').val();\n    var password = $('#txt-password').val();\n    var csrf_token = $('#csrf-token').val();\n    var params = {\n      name: name,\n      email: email,\n      password: password\n    };\n    $.ajax({\n      type: 'POST',\n      url: '/register',\n      headers: {\n        'x-csrf-token': csrf_token\n      },\n      data: params\n    })\n    .done(navigateToRoot);\n  });\n\n  $('#btn-logout').click(function () {\n    var csrf_token = $('#csrf-token').val();\n    $.ajax({\n      type: 'DELETE',\n      url: '/logout',\n      headers: {\n        'x-csrf-token': csrf_token\n      },\n    }).done(navigateToRoot);\n  });\n\n  $('#btn-login').click(function () {\n    var email = $('#txt-email').val();\n    var password = $('#txt-password').val();\n    var csrf_token = $('#csrf-token').val();\n    $('.addict.errors').empty();\n    var params = {\n      email: email,\n      password: password\n    };\n\n    $.ajax({\n      type: 'POST',\n      url: '/login',\n      headers: {\n        'x-csrf-token': csrf_token\n      },\n      data: params\n    })\n    .fail(function (res) {addErrors(res.responseJSON.errors); })\n    .done(navigateToRoot);;\n  });\n\n  $('#btn-reset-password').click(function () {\n    var csrf_token = $('#csrf-token').val();\n    var password = $('#txt-password').val();\n    var token = $('#token').val();\n    var signature = $('#signature').val();\n    $('.addict.errors').empty();\n    var params = {\n      password: password,\n      token: token,\n      signature: signature\n    };\n\n    $.ajax({\n      type: 'POST',\n      url: '/reset_password',\n      headers: {\n        'x-csrf-token': csrf_token\n      },\n      data: params\n    })\n    .fail(function (res) {addErrors(res.responseJSON.errors); })\n    .done(navigateToRoot);;\n  });\n\n\n  $('#btn-send-reset-password-link').click(function () {\n    var email = $('#txt-email').val();\n    var csrf_token = $('#csrf-token').val();\n    $('.addict.errors').empty();\n    var params = {\n      email: email,\n    };\n\n    $.ajax({\n      type: 'POST',\n      url: '/recover_password',\n      headers: {\n        'x-csrf-token': csrf_token\n      },\n      data: params\n    })\n    .fail(function() { addErrors([{message: \"Whoops, something went wrong! Please try again later.\"}]) })\n    .done(navigateToRoot);;\n  });\n});\n","import \"./addict\""]}